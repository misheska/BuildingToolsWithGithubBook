CHAPTER 8: Android and the Git Data API


                         String blobSha;
                         Tree newTree;
                         String commitMessage;
                         String postContentsWithYfm;
                         String contentsBase64;

                         String filename;
                         String post;
                         String repoName;

                         private void generateContent() {

                             commitMessage = "GitHubRu Update";
                             postContentsWithYfm = "---\nlayout: post\npublished: true\n---\n\n" + post;
                             contentsBase64 = new String( Base64.encodeBase64( postContentsWithYfm.getBytes() ) );
                             getFilename( post );
                         }


                         private void getFilename( String post ) {
                             String title = post.substring( 0, post.length() > 30 ? 30 : post.length() );
                             String jekyllfied = title.toLowerCase().replaceAll( "\W+", "-").replaceAll( "\W+$", "" );
                             SimpleDateFormat sdf = new SimpleDateFormat( "yyyy-MM-dd-" );

                             String prefix = sdf.format( new Date() );
                             filename = "_posts/" + prefix + jekyllfied + ".md";
                         }
                         ...



                      Services


                      There are several services (wrappers around git protocols) which we need to in-
                      stantiate. We donâ€™t use them all immediately, but we will need them at various

                      steps during the file save process.createServices   call manages these for
                      us. Once we have created the three services (repositories, commit, and data)


                         ...

                         RepositoryService repositoryService;
                         CommitService commitService;

                         DataService dataService;

                         private void createServices() throws IOException {
                             repositoryService = new RepositoryService();
                             repositoryService.getClient().setCredentials( login, password );

                             commitService = new CommitService();
                             commitService.getClient().setCredentials( login, password );
                             dataService = new DataService();
                             dataService.getClient().setCredentials( login, password );
                         }


                         Repository repository;



       184